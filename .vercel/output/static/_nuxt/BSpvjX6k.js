import{e as w,r as c,f as C,c as m,a as e,b as a,i as x,w as p,j as s,t as y,l as T,o as b,d as f}from"./Bj4nvvZt.js";import{_ as h}from"./DgtDeSoz.js";const $={class:"min-h-screen flex items-center justify-center bg-black p-4"},B={class:"w-full max-w-2xl"},N={class:"bg-white/10 backdrop-blur-md rounded-lg p-8 border border-white/20"},V={class:"space-y-6"},z={key:0,class:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg"},L={class:"text-red-400 text-sm"},j={key:1,class:"space-y-4"},S={class:"flex gap-2"},U={class:"flex gap-2"},O=w({__name:"generate-link",setup(D){const r=c(!1),n=c(""),o=c(""),i=c(""),d=C();async function k(){if(!r.value){r.value=!0,n.value="",o.value="",i.value="";try{const l=await $fetch("/api/gate/generate-link",{method:"POST"});l.success&&(o.value=l.accessLink,i.value=l.token,d.add({title:"链接生成成功",description:"链接已生成，24小时内有效",color:"primary"}))}catch(l){n.value=l.data?.message||l.message||"生成链接失败",d.add({title:"生成失败",description:n.value,color:"red"})}finally{r.value=!1}}}function g(l){typeof navigator<"u"&&navigator.clipboard&&navigator.clipboard.writeText(l).then(()=>{d.add({title:"已复制",description:"链接已复制到剪贴板",color:"primary"})}).catch(()=>{d.add({title:"复制失败",description:"请手动复制链接",color:"red"})})}return(l,t)=>{const u=T,v=h;return b(),m("div",$,[e("div",B,[e("div",N,[t[8]||(t[8]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-white mb-2"}," 生成访问链接 "),e("p",{class:"text-gray-300 text-sm"}," 生成一次性访问链接，24小时内有效 ")],-1)),e("div",V,[a(u,{type:"button",loading:s(r),size:"xl",color:"primary",block:"",class:"w-full",onClick:k},{default:p(()=>[f(y(s(o)?"重新生成链接":"生成访问链接"),1)]),_:1},8,["loading"]),s(n)?(b(),m("div",z,[e("p",L,y(s(n)),1)])):x("",!0),s(o)?(b(),m("div",j,[t[6]||(t[6]=e("div",{class:"p-4 bg-green-500/20 border border-green-500/50 rounded-lg"},[e("p",{class:"text-green-400 text-sm mb-2"}," ✅ 链接已生成，24小时内有效 ")],-1)),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-gray-300 text-sm mb-2"}," 访问链接： ",-1)),e("div",S,[a(v,{"model-value":s(o),readonly:"",size:"lg",class:"flex-1"},null,8,["model-value"]),a(u,{color:"primary",variant:"outline",icon:"i-heroicons-clipboard-document",onClick:t[0]||(t[0]=_=>g(s(o)))},{default:p(()=>[...t[2]||(t[2]=[f(" 复制 ",-1)])]),_:1})])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-gray-300 text-sm mb-2"}," Token： ",-1)),e("div",U,[a(v,{"model-value":s(i),readonly:"",size:"lg",class:"flex-1 font-mono text-xs"},null,8,["model-value"]),a(u,{color:"primary",variant:"outline",icon:"i-heroicons-clipboard-document",onClick:t[1]||(t[1]=_=>g(s(i)))},{default:p(()=>[...t[4]||(t[4]=[f(" 复制 ",-1)])]),_:1})])]),t[7]||(t[7]=e("div",{class:"p-4 bg-blue-500/20 border border-blue-500/50 rounded-lg"},[e("p",{class:"text-blue-300 text-sm"},[e("strong",null,"使用说明：")]),e("ul",{class:"text-blue-300/80 text-sm mt-2 space-y-1 list-disc list-inside"},[e("li",null,"通过此链接访问的用户无需输入密码"),e("li",null,"链接在24小时后自动失效"),e("li",null,"通过链接访问的用户无法访问此管理页面"),e("li",null,"可以生成多个链接，每个链接独立有效")])],-1))])):x("",!0)])])])])}}});export{O as default};
