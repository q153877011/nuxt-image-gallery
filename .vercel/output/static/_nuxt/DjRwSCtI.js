import{_ as v}from"./DgtDeSoz.js";import{e as b,r as n,f as y,g as _,c,o as u,a as s,h as x,b as m,i as g,n as h,j as o,k,t as V,w as T,d as B,l as C,m as N}from"./Bj4nvvZt.js";const S={class:"min-h-screen flex items-center justify-center bg-black"},$={class:"w-full max-w-md p-8"},z={class:"bg-white/10 backdrop-blur-md rounded-lg p-8 border border-white/20"},P={key:0,class:"mt-2 text-sm text-red-400"},M=b({__name:"gate",setup(U){const a=n(""),r=n(!1),t=n(""),i=y();async function p(){if(!(r.value||!a.value)){r.value=!0,t.value="";try{(await $fetch("/api/gate/verify",{method:"POST",body:{password:a.value}})).verified&&(i.add({title:"验证成功",description:"正在跳转...",color:"primary"}),await new Promise(e=>setTimeout(e,200)),typeof window<"u"?window.location.href="/":await N("/",{replace:!0}))}catch(l){t.value=l.data?.message||l.message||"验证失败，请重试",i.add({title:"验证失败",description:t.value,color:"red"})}finally{r.value=!1}}}return _(()=>{document.querySelector('input[type="password"]')?.focus()}),(l,e)=>{const f=v,w=C;return u(),c("div",S,[s("div",$,[s("div",z,[e[3]||(e[3]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-3xl font-bold text-white mb-2"}," 访问验证 "),s("p",{class:"text-gray-300 text-sm"}," 请输入密码以继续访问 ")],-1)),s("form",{onSubmit:x(p,["prevent"]),class:"space-y-6"},[s("div",null,[m(f,{modelValue:o(a),"onUpdate:modelValue":e[0]||(e[0]=d=>k(a)?a.value=d:null),type:"password",placeholder:"请输入密码",size:"xl",class:h(["text-center",{"border-red-500":o(t)}]),autocomplete:"off",onInput:e[1]||(e[1]=d=>t.value="")},null,8,["modelValue","class"]),o(t)?(u(),c("p",P,V(o(t)),1)):g("",!0)]),m(w,{type:"submit",loading:o(r),disabled:!o(a),size:"xl",color:"primary",block:"",class:"w-full"},{default:T(()=>[...e[2]||(e[2]=[B(" 验证 ",-1)])]),_:1},8,["loading","disabled"])],32)])])])}}});export{M as default};
